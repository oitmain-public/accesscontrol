!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.AccessControl=e()}}(function(){var e;return function t(e,r,n){function o(s,u){if(!r[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};e[s][0].call(f.exports,function(t){var r=e[s][1][t];return o(r?r:t)},f,f.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./core"),o=e("./enums"),i=e("./utils"),s=function(){function e(e){void 0===e&&(e={}),this._grants=e}return e.prototype.getGrants=function(){return this._grants},e.prototype.setGrants=function(e){var t=this;this._grants={};var r=i["default"].type(e);return"object"===r?this._grants=e:"array"===r&&e.forEach(function(e){return i["default"].commitToGrants(t._grants,e,!0)}),this},e.prototype.reset=function(){return this._grants={},this},e.prototype.extendRole=function(e,t){return i["default"].extendRole(this._grants,e,t),this},e.prototype.removeRoles=function(e){var t=this,r=i["default"].toStringArray(e);return r.forEach(function(e){delete t._grants[e]}),this._each(function(e,t){Array.isArray(t.$extend)&&(t.$extend=i["default"].subtractArray(t.$extend,r))}),this},e.prototype.removeResources=function(e,t){return this._removePermission(e,t),this},e.prototype.getRoles=function(){return Object.keys(this._grants)},e.prototype.getResources=function(){var e={};return this._eachRoleResource(function(t,r){e[r]=null}),Object.keys(e)},e.prototype.hasRole=function(e){return this._grants.hasOwnProperty(e)},e.prototype.hasResource=function(e){if("string"!=typeof e||""===e)return!1;var t=this.getResources();return t.indexOf(e)>=0},e.prototype.can=function(e){return new n.Query(this._grants,e)},e.prototype.access=function(e){return this.can(e)},e.prototype.permission=function(e){return new n.Permission(this._grants,e)},e.prototype.grant=function(e){return new n.Access(this._grants,e,!1)},e.prototype.allow=function(e){return this.grant(e)},e.prototype.deny=function(e){return new n.Access(this._grants,e,!0)},e.prototype.reject=function(e){return this.deny(e)},e.prototype._each=function(e){var t=this;i["default"].eachKey(this._grants,function(r){return e(r,t._grants[r])})},e.prototype._eachRole=function(e){i["default"].eachKey(this._grants,function(t){return e(t)})},e.prototype._eachRoleResource=function(e){var t,r,n=this;this._eachRole(function(o){t=n._grants[o],i["default"].eachKey(t,function(t){r=o[t],e(o,t,r)})})},e.prototype._removePermission=function(e,t,r){var n=this;e=i["default"].toStringArray(e),t&&(t=i["default"].toStringArray(t)),this._eachRoleResource(function(o,i){e.indexOf(i)>=0&&(!t||t.indexOf(o)>=0)&&(r?delete n._grants[o][i][r]:delete n._grants[o][i])})},Object.defineProperty(e,"Action",{get:function(){return o.Action},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Possession",{get:function(){return o.Possession},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Error",{get:function(){return n.AccessControlError},enumerable:!0,configurable:!0}),e.filter=function(e,t){i["default"].filterAll(e,t)},e.isACError=function(e){return e instanceof n.AccessControlError},e.isAccessControlError=function(t){return e.isACError(t)},e}();r["default"]=s},{"./core":6,"./enums":9,"./utils":10}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../enums"),o=e("../utils"),i=function(){function e(e,t,r){void 0===r&&(r=!1),this._={},this._grants=e,this._.denied=r,"string"==typeof t||Array.isArray(t)?this.role(t):"object"===o["default"].type(t)&&(t.denied=r,this._=o["default"].resetAttributes(t),o["default"].isInfoFulfilled(this._)&&o["default"].commitToGrants(this._grants,this._,!0))}return Object.defineProperty(e.prototype,"denied",{get:function(){return this._.denied},enumerable:!0,configurable:!0}),e.prototype.role=function(e){return this._.role=e,this},e.prototype.resource=function(e){return this._.resource=e,this},e.prototype.attributes=function(e){return this._.attributes=e,this},e.prototype.extend=function(e){return o["default"].extendRole(this._grants,this._.role,e),this},e.prototype.grant=function(t){return new e(this._grants,t,!1).attributes(["*"])},e.prototype.deny=function(t){return new e(this._grants,t,!0).attributes([])},e.prototype.createOwn=function(e,t){return this._prepareAndCommit(n.Action.CREATE,n.Possession.OWN,e,t)},e.prototype.createAny=function(e,t){return this._prepareAndCommit(n.Action.CREATE,n.Possession.ANY,e,t)},e.prototype.create=function(e,t){return this.createAny(e,t)},e.prototype.readOwn=function(e,t){return this._prepareAndCommit(n.Action.READ,n.Possession.OWN,e,t)},e.prototype.readAny=function(e,t){return this._prepareAndCommit(n.Action.READ,n.Possession.ANY,e,t)},e.prototype.read=function(e,t){return this.readAny(e,t)},e.prototype.updateOwn=function(e,t){return this._prepareAndCommit(n.Action.UPDATE,n.Possession.OWN,e,t)},e.prototype.updateAny=function(e,t){return this._prepareAndCommit(n.Action.UPDATE,n.Possession.ANY,e,t)},e.prototype.update=function(e,t){return this.updateAny(e,t)},e.prototype.deleteOwn=function(e,t){return this._prepareAndCommit(n.Action.DELETE,n.Possession.OWN,e,t)},e.prototype.deleteAny=function(e,t){return this._prepareAndCommit(n.Action.DELETE,n.Possession.ANY,e,t)},e.prototype["delete"]=function(e,t){return this.deleteAny(e,t)},e.prototype._prepareAndCommit=function(e,t,r,n){return this._.action=e,this._.possession=t,r&&(this._.resource=r),n&&(this._.attributes=n),this._.attributes=this._.denied?[]:this._.attributes?o["default"].toStringArray(this._.attributes):["*"],o["default"].commitToGrants(this._grants,this._,!1),this._.attributes=void 0,this},e}();r["default"]=i},{"../enums":9,"../utils":10}],3:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(e){function t(r){void 0===r&&(r="");var n=e.call(this,r)||this;return n.message=r,n.name="AccessControlError",Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(Error);r["default"]=o},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utils"),o=function(){function e(e,t){this._={},this._.role=t.role,this._.resource=t.resource,this._.attributes=n["default"].getUnionAttrsOfRoles(e,t)}return Object.defineProperty(e.prototype,"roles",{get:function(){return this._.role},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resource",{get:function(){return this._.resource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this._.attributes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"granted",{get:function(){return this.attributes&&0!==this.attributes.length?this.attributes.some(function(e){return"!"!==e.trim().slice(0,1)}):!1},enumerable:!0,configurable:!0}),e.prototype.filter=function(e){return n["default"].filterAll(e,this.attributes)},e}();r["default"]=o},{"../utils":10}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../core"),o=e("../enums"),i=e("../utils"),s=function(){function e(e,t){this._={},this._grants=e,"object"===i["default"].type(t)?this._=t:this._.role=t}return e.prototype.role=function(e){return this._.role=e,this},e.prototype.resource=function(e){return this._.resource=e,this},e.prototype.createOwn=function(e){return this._getPermission(o.Action.CREATE,o.Possession.OWN,e)},e.prototype.createAny=function(e){return this._getPermission(o.Action.CREATE,o.Possession.ANY,e)},e.prototype.create=function(e){return this.createAny(e)},e.prototype.readOwn=function(e){return this._getPermission(o.Action.READ,o.Possession.OWN,e)},e.prototype.readAny=function(e){return this._getPermission(o.Action.READ,o.Possession.ANY,e)},e.prototype.read=function(e){return this.readAny(e)},e.prototype.updateOwn=function(e){return this._getPermission(o.Action.UPDATE,o.Possession.OWN,e)},e.prototype.updateAny=function(e){return this._getPermission(o.Action.UPDATE,o.Possession.ANY,e)},e.prototype.update=function(e){return this.updateAny(e)},e.prototype.deleteOwn=function(e){return this._getPermission(o.Action.DELETE,o.Possession.OWN,e)},e.prototype.deleteAny=function(e){return this._getPermission(o.Action.DELETE,o.Possession.ANY,e)},e.prototype["delete"]=function(e){return this.deleteAny(e)},e.prototype._getPermission=function(e,t,r){return this._.action=e,this._.possession=t,r&&(this._.resource=r),new n.Permission(this._grants,this._)},e}();r["default"]=s},{"../core":6,"../enums":9,"../utils":10}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./AccessControlError");r.AccessControlError=n["default"];var o=e("./Access");r.Access=o["default"];var i=e("./Query");r.Query=i["default"];var s=e("./Permission");r.Permission=s["default"]},{"./Access":2,"./AccessControlError":3,"./Permission":4,"./Query":5}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={CREATE:"create",READ:"read",UPDATE:"update",DELETE:"delete"};r["default"]=n},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={OWN:"own",ANY:"any"};r["default"]=n},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./Action");r.Action=n["default"];var o=e("./Possession");r.Possession=o["default"];var i=Object.keys(n["default"]).map(function(e){return n["default"][e]});r.actions=i;var s=Object.keys(o["default"]).map(function(e){return o["default"][e]});r.possessions=s},{"./Action":7,"./Possession":8}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("notation"),o=e("./enums"),i=e("./core"),s={type:function(e){return Object.prototype.toString.call(e).match(/\s(\w+)/i)[1].toLowerCase()},hasDefined:function(e,t){return e.hasOwnProperty(t)&&void 0!==e[t]},toStringArray:function(e){if(Array.isArray(e))return e;if("string"==typeof e)return e.trim().split(/\s*[;,]\s*/);throw new i.AccessControlError("Cannot convert value to array!")},isFilledStringArray:function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if("string"!=typeof n||""===n.trim())return!1}return!0},isStringOrArray:function(e){return"string"==typeof e||s.isFilledStringArray(e)},isEmptyArray:function(e){return Array.isArray(e)&&0===e.length},uniqConcat:function(e,t){var r=e.concat();return t.forEach(function(e){r.indexOf(e)<0&&r.push(e)}),r},subtractArray:function(e,t){return e.concat().filter(function(e){return-1===t.indexOf(e)})},eachKey:function(e,t){return Object.keys(e).forEach(t)},getFlatRoles:function(e,t){t=s.toStringArray(t);var r=t.concat();return t.forEach(function(t){var n=e[t];Array.isArray(n.$extend)&&(r=s.uniqConcat(r,n.$extend))}),r},normalizeActionPossession:function(e){if("string"!=typeof e.action)throw new i.AccessControlError("Invalid action: "+e.action);var t=e.action.split(":");if(o.actions.indexOf(t[0].trim().toLowerCase())<0)throw new i.AccessControlError("Invalid action: "+t[0]);e.action=t[0].trim().toLowerCase();var r=e.possession||t[1];if(r){if(o.possessions.indexOf(r.trim().toLowerCase())<0)throw new i.AccessControlError("Invalid action possession: "+r);e.possession=r.trim().toLowerCase()}else e.possession=o.Possession.ANY;return e},normalizeQueryInfo:function(e,t){if(void 0===t&&(t=!1),e=Object.assign({},e),e.role=s.toStringArray(e.role),!s.isFilledStringArray(e.role))throw new i.AccessControlError("Invalid role(s): "+JSON.stringify(e.role));if("string"!=typeof e.resource||""===e.resource.trim())throw new i.AccessControlError('Invalid resource: "'+e.resource+'"');return e.resource=e.resource.trim(),t&&(e=s.normalizeActionPossession(e)),e},normalizeAccessInfo:function(e,t){if(void 0===t&&(t=!1),e=Object.assign({},e),e.role=s.toStringArray(e.role),!s.isFilledStringArray(e.role))throw new i.AccessControlError("Invalid role(s): "+JSON.stringify(e.role));if(e.resource=s.toStringArray(e.resource),!s.isFilledStringArray(e.resource))throw new i.AccessControlError("Invalid resource(s): "+JSON.stringify(e.resource));return e.attributes=e.denied||Array.isArray(e.attributes)&&0===e.attributes.length?[]:e.attributes?s.toStringArray(e.attributes):["*"],t&&(e=s.normalizeActionPossession(e)),e},resetAttributes:function(e){return e.denied?(e.attributes=[],e):((!e.attributes||s.isEmptyArray(e.attributes))&&(e.attributes=["*"]),e)},isInfoFulfilled:function(e){return s.hasDefined(e,"role")&&s.hasDefined(e,"action")&&s.hasDefined(e,"resource")},commitToGrants:function(e,t,r){void 0===r&&(r=!1),t=s.normalizeAccessInfo(t,r),t.role.forEach(function(r){e.hasOwnProperty(r)||(e[r]={});var n=e[r],o=t.action+":"+t.possession;t.resource.forEach(function(e){n.hasOwnProperty(e)||(n[e]={}),n[e][o]=t.attributes})})},getUnionAttrsOfRoles:function(e,t){if(!e)throw new i.AccessControlError("Grants are not set.");t=s.normalizeQueryInfo(t);var r,o,u=[],a=s.getFlatRoles(e,t.role);a.forEach(function(n){r=e[n],r&&(o=r[t.resource],o&&u.push((o[t.action+":"+t.possession]||o[t.action+":any"]||[]).concat()))});var c=[],f=u.length;if(f>0){c=u[0];for(var l=1;f>l;)c=n.Glob.union(c,u[l]),l++}return c},getNonExistentRoles:function(e,t){for(var r=[],n=0,o=t;n<o.length;n++){var i=o[n];e.hasOwnProperty(i)||r.push(i)}return r},extendRole:function(e,t,r){var n=s.toStringArray(r),o=s.getNonExistentRoles(e,n);if(o.length>0)throw new i.AccessControlError('Cannot extend with non-existent role(s): "'+o.join(", ")+'"');s.toStringArray(t).forEach(function(t){if(n.indexOf(t)>=0)throw new i.AccessControlError('Attempted to extend role "'+t+'" by itself.');if(e.hasOwnProperty(t)){var r=e[t];r.$extend=Array.isArray(r.$extend)?s.uniqConcat(r.$extend,n):n.concat()}else e[t]={$extend:n.concat()}})},filter:function(e,t){if(!Array.isArray(t)||0===t.length)return{};var r=new n(e);return r.filter(t).value},filterAll:function(e,t){return Array.isArray(e)?e.map(function(e){return s.filter(e,t)}):s.filter(e,t)}};r["default"]=s},{"./core":6,"./enums":9,notation:11}],11:[function(t,r,n){!function(t,o){"object"==typeof n&&"object"==typeof r?r.exports=o():"function"==typeof e&&e.amd?e("notation",[],o):"object"==typeof n?n.notation=o():t.notation=o()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="dist/",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var o=r(1),i=n(o);e.exports=i["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),u=n(s),a=r(3),c=n(a),f=r(4),l=n(f),d={SOURCE:"Invalid source object.",DEST:"Invalid destination object.",NOTATION:"Invalid notation: ",NOTA_OBJ:"Invalid notations object: "},h=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,e),!u["default"].isObject(t))throw new l["default"](d.SOURCE);this._source=t}return i(e,[{key:"each",value:function(t){var r=this,n=this._source,o=Object.keys(n);u["default"].each(o,function(o){var i=n[o],s=void 0;u["default"].isObject(i)?(s=new e(i),s.each(function(e,r,i){var u=o+"."+e;t.call(s,u,r,i,n)})):t.call(r,o,o,i,n)})}},{key:"eachKey",value:function(e){return this.each(e)}},{key:"eachValue",value:function(t,r){if(!e.isValid(t))throw new l["default"](d.NOTATION+"`"+t+"`");var n=this._source;e.eachNote(t,function(e,t,o,i){return n=u["default"].hasOwn(n,t)?n[t]:void 0,r(n,e,t,o,i)===!1?!1:void 0})}},{key:"getNotations",value:function(){var e=[];return this.each(function(t){e.push(t)}),e}},{key:"flatten",value:function(){var e={};return this.each(function(t,r,n){e[t]=n}),this._source=e,this}},{key:"expand",value:function(){return this._source=e.create({}).merge(this._source).value,this}},{key:"aggregate",value:function(){return this.expand()}},{key:"inspect",value:function(t){if(!e.isValid(t))throw new l["default"](d.NOTATION+"`"+t+"`");var r=this._source,n={has:!1,value:void 0};return e.eachNote(t,function(e,t){return u["default"].hasOwn(r,t)?(r=r[t],void(n={has:!0,value:r})):(n={has:!1,value:void 0},!1)}),n}},{key:"inspectRemove",value:function(t){if(!e.isValid(t))throw new l["default"](d.NOTATION+"`"+t+"`");var r=void 0,n=void 0;if(t.indexOf(".")<0)n=t,r=this._source;else{var o=e.parent(t);n=e.last(t),r=this.inspect(o).value}var i=void 0;return u["default"].hasOwn(r,n)?(i={has:!0,value:r[n]},delete r[n]):i={has:!1,value:void 0},i}},{key:"has",value:function(e){return this.inspect(e).has}},{key:"hasDefined",value:function(e){return void 0!==this.inspect(e).value}},{key:"get",value:function(e,t){var r=this.inspect(e);return r.has?r.value:t}},{key:"set",value:function(t,r){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];if(!e.isValid(t))throw new l["default"](d.NOTATION+"`"+t+"`");var o=this._source,i=void 0;return e.eachNote(t,function(e,t,s,a){i=s===a.length-1,u["default"].hasOwn(o,t)?i?n&&(o[t]=r):o=o[t]:o=o[t]=i?r:{}}),this}},{key:"merge",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(!u["default"].isObject(e))throw new l["default"](d.NOTA_OBJ+"`"+e+"`");var n=void 0;return u["default"].each(Object.keys(e),function(o){n=e[o],t.set(o,n,r)}),this}},{key:"separate",value:function(t){var r=this;if(!u["default"].isArray(t))throw new l["default"](d.NOTA_OBJ+"`"+t+"`");var n=new e({});return u["default"].each(t,function(e){var t=r.inspectRemove(e);n.set(e,t.value)}),this._source=n._source,this}},{key:"filter",value:function(t){var r=this,n=this.value,o=u["default"].deepCopy(n);if(u["default"].stringOrArrayOf(t,"*"))return this._source=o,this;if(0===arguments.length||u["default"].stringOrArrayOf(t,""))return this._source={},this;var i=u["default"].isArray(t)?c["default"].sort(t.concat()):[t],s=void 0;"*"===i[0]?(s=new e(o),i.shift()):s=new e({});var a=void 0,f=void 0,l=void 0;return u["default"].each(i,function(e){return a=new c["default"](e),f=".*"===a.normalized.slice(-2),l=f?a.normalized.slice(0,-2):a.normalized,l.indexOf("*")<0?(a.isNegated?(s.remove(l),f&&s.set(l,{},!0)):s.copyFrom(n,l,null,!0),!0):void r.each(function(e,t,r){a.test(e)&&(a.isNegated?s.remove(e):s.set(e,r,!0))})}),this._source=s.value,this}},{key:"remove",value:function(e){return this.inspectRemove(e),this}},{key:"clone",value:function(){var t=u["default"].deepCopy(this.value);return new e(t)}},{key:"copyTo",value:function(t,r){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];if(!u["default"].isObject(t))throw new l["default"](d.DEST);var i=this.inspect(r);return i.has&&new e(t).set(n||r,i.value,o),this}},{key:"copyFrom",value:function(t,r){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];if(!u["default"].isObject(t))throw new l["default"](d.DEST);var i=new e(t).inspect(r);return i.has&&this.set(n||r,i.value,o),this}},{key:"moveTo",value:function(t,r){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];if(!u["default"].isObject(t))throw new l["default"](d.DEST);var i=this.inspectRemove(r);return i.has&&new e(t).set(n||r,i.value,o),this}},{key:"moveFrom",value:function(t,r){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];if(!u["default"].isObject(t))throw new l["default"](d.DEST);var i=new e(t).inspectRemove(r);return i.has&&this.set(n||r,i.value,o),this}},{key:"rename",value:function(e,t,r){return t?this.moveTo(this._source,e,t,r):this}},{key:"renote",value:function(e,t,r){return this.rename(e,t,r)}},{key:"extract",value:function(e,t){var r={};return this.copyTo(r,e,t),r}},{key:"copyToNew",value:function(e,t){return this.extract(e,t)}},{key:"extrude",value:function(e,t){var r={};return this.moveTo(r,e,t),r}},{key:"moveToNew",value:function(e,t){return this.extrude(e,t)}},{key:"value",get:function(){return this._source}}],[{key:"create",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return new e(t)}},{key:"isValid",value:function(e){return"string"==typeof e&&/^[^\s\.!]+(\.[^\s\.!]+)*$/.test(e)}},{key:"first",value:function(t){if(!e.isValid(t))throw new l["default"](d.NOTATION+"`"+t+"`");return t.split(".")[0]}},{key:"last",value:function(t){if(!e.isValid(t))throw new l["default"](d.NOTATION+"`"+t+"`");return t.split(".").reverse()[0]}},{key:"parent",value:function(t){if(!e.isValid(t))throw new l["default"](d.NOTATION+"`"+t+"`");return t.indexOf(".")>=0?t.replace(/\.[^\.]*$/,""):null}},{key:"eachNote",value:function(t,r){if(!e.isValid(t))throw new l["default"](d.NOTATION+"`"+t+"`");var n=t.split("."),o=[],i=void 0;u["default"].each(n,function(e,t){return o.push(e),i=o.join("."),r(i,e,t,n)===!1?!1:void 0},e)}}]),e}();h.Error=l["default"],h.Glob=c["default"],t["default"]=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.prototype.toString,n={isObject:function(e){return"[object Object]"===r.call(e)},isArray:function(e){return"[object Array]"===r.call(e)},hasOwn:function(e,t){return e&&"function"==typeof e.hasOwnProperty&&e.hasOwnProperty(t)},deepCopy:function(e){if(!n.isObject(e))return e;var t,r,o={};for(t in e)n.hasOwn(e,t)&&(r=e[t],o[t]=n.isObject(r)?n.deepCopy(r):r);return o},each:function(e,t,r){for(var n=e.length,o=-1;++o<n&&t.call(r,e[o],o,e)!==!1;);},eachRight:function(e,t){for(var r=e.length;r--&&t(e[r],r,e)!==!1;);},pregQuote:function(e,t){return String(e).replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(t||"")+"-]","g"),"\\$&")},stringOrArrayOf:function(e,t){return"string"==typeof e&&e===t||n.isArray(e)&&1===e.length&&e[0]===t}};t["default"]=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),u=n(s),a=r(4),c=n(a),f=function(){function e(t){if(o(this,e),!e.isValid(t))throw new c["default"]('Invalid notation glob: "'+t+'"');this.glob=t;var r=e.normalize(t);this.normalized=r.glob,this.isNegated=r.isNegated,this.regexp=e.toRegExp(this.normalized),this.levels=this.normalized.split(".")}return i(e,[{key:"test",value:function(e){return"*"===this.normalized||""!==this.normalized&&""!==e&&this.regexp.test(e)}}],[{key:"create",value:function(t){return new e(t)}},{key:"toRegExp",value:function(e,t){return e=u["default"].pregQuote(e).replace(/\\\*/g,"[^\\s\\.]*").replace(/\\\?/g,"."),new RegExp("^"+e,t||"")}},{key:"normalize",value:function(t){t=t.replace(/\*+/g,"*"),t=e.isValid(t)?t:"";var r="!"===t.slice(0,1);return t=r?t.slice(1):t,{glob:t,isNegated:r}}},{key:"isValid",value:function(e){return"string"==typeof e&&/^!?[^\s\.!]+(\.[^\s\.!]+)*$/.test(e)}},{key:"compare",value:function(e,t){if(e===t)return 0;var r=e.split("."),n=t.split(".");if(r.length===n.length){var o=/(?:^|\.)\*(?:$|\.)/g,i=e.match(o),s=t.match(o),u=i?i.length:0,a=s?s.length:0;if(u===a){var c=0===e.indexOf("!"),f=0===t.indexOf("!");if(c===f)return t>e?-1:1;var l=c?e.slice(1):e,d=f?t.slice(1):t;return l===d?c?1:-1:d>l?-1:1}return u>a?-1:1}return r.length<n.length?-1:1}},{key:"sort",value:function(t){return t.sort(e.compare)}},{key:"union",value:function(t,r,n){var o=void 0,i=void 0,s=void 0;u["default"].eachRight(t,function(n,a){if(s=r.indexOf(n),s>=0&&r.splice(s,1),0===n.indexOf("!")){if(o=n.slice(1),r.indexOf(o)>=0)return t.splice(a,1),!0;u["default"].eachRight(r,function(r){r.indexOf("!")<0&&(i=e.toRegExp(r),i.test(o)&&t.splice(a,1))})}else s=r.indexOf("!"+n),s>=0&&r.splice(s,1)});var a=t.concat(r);return void 0===n||n===!0?e.sort(a):a}}]),e}();t["default"]=f},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];r(this,t);var o=n(this,Object.getPrototypeOf(t).call(this,e));return o.name=o.constructor.name,Object.defineProperty(o,"name",{enumerable:!1,writable:!1,value:"NotationError"}),Object.defineProperty(o,"message",{enumerable:!1,writable:!0,value:e}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(o,o.constructor):Object.defineProperty(o,"stack",{enumerable:!1,writable:!1,value:new Error(e).stack}),o}return o(t,e),t}(Error);t["default"]=i}])})},{}]},{},[1])(1)});